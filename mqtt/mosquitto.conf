# =====================================================================================
# Configuration MQTT Broker Mosquitto - Station Traffey√®re
# =====================================================================================

# Listeners
listener 1883 0.0.0.0
protocol mqtt

listener 9001 0.0.0.0  
protocol websockets

# Authentication
allow_anonymous false
password_file /mosquitto/config/passwd

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true

# Persistence
persistence true
persistence_location /mosquitto/data/

# Limits
max_connections 200
max_inflight_messages 20
max_queued_messages 1000

# Connection timeout
keepalive_interval 60

# Topics ACL (Access Control List)
acl_file /mosquitto/config/acl

# QoS
max_qos 2
upgrade_outgoing_qos false

# Retain messages
retain_available true

# Session expiry
session_expiry_interval 3600

# Bridge connections (pour extension multi-sites)
# connection bridge-site-2
# address site2.traffeyere.local:1883
# bridge_attempt_unsubscribe false
# bridge_protocol_version mqttv311
# try_private false
