# =============================================================================
# Station Traffeyère IoT/AI Platform - Configuration Environnement
# Déploiement Coolify - RNCP 39394
# =============================================================================

# === DOMAINES ET URLS ===
FRONTEND_URL=https://frontend-station.johann-lebel.fr
BACKEND_URL=https://backend-station.johann-lebel.fr
GRAFANA_URL=https://grafana.johann-lebel.fr
PROMETHEUS_URL=https://prometheus.johann-lebel.fr
MINIO_URL=https://minio.johann-lebel.fr
INFLUXDB_URL=https://influxdb.johann-lebel.fr

# === POSTGRES / TIMESCALEDB ===
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=station_traffeyere
POSTGRES_USER=station_user
POSTGRES_PASSWORD=CHANGEME_POSTGRES_PROD_PASSWORD
POSTGRES_ROOT_PASSWORD=CHANGEME_POSTGRES_ROOT_PASSWORD

# === REDIS ===
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGEME_REDIS_PROD_PASSWORD
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}

# === INFLUXDB ===
INFLUXDB_HOST=influxdb
INFLUXDB_PORT=8086
INFLUXDB_ADMIN_USER=admin
INFLUXDB_ADMIN_PASSWORD=CHANGEME_INFLUXDB_ADMIN_PASSWORD
INFLUXDB_ORG=station-traffeyere
INFLUXDB_BUCKET=iot-metrics
INFLUXDB_TOKEN=CHANGEME_INFLUXDB_API_TOKEN

# === MINIO S3 STORAGE ===
MINIO_HOST=minio
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=CHANGEME_MINIO_ROOT_USER
MINIO_ROOT_PASSWORD=CHANGEME_MINIO_ROOT_PASSWORD
MINIO_ACCESS_KEY=${MINIO_ROOT_USER}
MINIO_SECRET_KEY=${MINIO_ROOT_PASSWORD}

# === JWT & SECURITY ===
JWT_SECRET=CHANGEME_JWT_SECRET_256_BITS_MIN
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# === APPLICATION SECRETS ===
API_SECRET_KEY=CHANGEME_API_SECRET_KEY_256_BITS
ENCRYPTION_KEY=CHANGEME_ENCRYPTION_KEY_32_BYTES

# === GRAFANA ===
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGEME_GRAFANA_ADMIN_PASSWORD
GRAFANA_SECRET_KEY=CHANGEME_GRAFANA_SECRET_KEY

# === PROMETHEUS ===
PROMETHEUS_RETENTION=30d
PROMETHEUS_STORAGE_PATH=/prometheus
PROMETHEUS_WEB_EXTERNAL_URL=${PROMETHEUS_URL}

# === ALERTMANAGER ===
ALERTMANAGER_SLACK_WEBHOOK_CRITICAL=CHANGEME_SLACK_WEBHOOK_CRITICAL
ALERTMANAGER_SLACK_WEBHOOK_WARNING=CHANGEME_SLACK_WEBHOOK_WARNING
ALERTMANAGER_EMAIL_SMTP_HOST=smtp.johann-lebel.fr
ALERTMANAGER_EMAIL_FROM=alerts@johann-lebel.fr
ALERTMANAGER_EMAIL_TO=johann@johann-lebel.fr

# === SSL/TLS ===
ACME_EMAIL=johann@johann-lebel.fr
LETSENCRYPT_STAGING=false

# === LOG LEVELS ===
LOG_LEVEL=INFO
DEBUG=false

# === PERFORMANCE ===
WORKER_CONNECTIONS=1024
WORKER_PROCESSES=auto
PM_MAX_CHILDREN=10
PM_START_SERVERS=4
PM_MIN_SPARE_SERVERS=2
PM_MAX_SPARE_SERVERS=6

# === IOT GENERATOR ===
IOT_GENERATOR_PORT=8090
IOT_SENSORS_COUNT=127
IOT_GENERATION_INTERVAL=5
IOT_ANOMALY_PROBABILITY=0.02

# === EDGE AI ENGINE ===
EDGE_AI_PORT=8091
AI_MODEL_TYPE=isolation_forest
LATENCY_TARGET_MS=0.28
AI_EXPLAINABILITY_ENABLED=true

# === SOC DASHBOARD ===
SOC_DASHBOARD_PORT=8080
SOC_WEBSOCKET_MAX_CONNECTIONS=100
SOC_ALERTS_ENABLED=true
SOC_THREAT_INTEL_ENABLED=true

# === BACKUP & MONITORING ===
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=station-traffeyere-backups
MONITORING_RETENTION_DAYS=90

# === COOLIFY DEPLOYMENT ===
COOLIFY_APP_NAME=station-traffeyere
COOLIFY_ENVIRONMENT=production
DOCKER_REGISTRY=ghcr.io/username/station-traffeyere
IMAGE_TAG=latest

# === RESOURCE LIMITS ===
POSTGRES_MEMORY_LIMIT=2g
REDIS_MEMORY_LIMIT=512m
INFLUXDB_MEMORY_LIMIT=1g
MINIO_MEMORY_LIMIT=1g
GRAFANA_MEMORY_LIMIT=512m
PROMETHEUS_MEMORY_LIMIT=2g
BACKEND_MEMORY_LIMIT=1g
FRONTEND_MEMORY_LIMIT=128m

# === HEALTH CHECKS ===
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=60s